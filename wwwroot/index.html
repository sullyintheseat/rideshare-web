<html>
  <head>
    <title>Beta Signup</title>
 
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/cdn/js/libs//handlebars-v1.3.0.js"></script>
    <script src="/cdn/js/webcalls.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="cdn/style/custom.css">
    <style>

      body {
        background-color: #fff;
      }

      input {
        text-align: center;
        width:100%;
        padding: 0.25em;      
        border-top: none;
        min-height: 2em;
        border-left: none;
        border-right: none;
        margin-top:4px;
        max-width: 480px;
      }
      input:focus{ 
        outline: none;
        border-bottom: 1px solid rgb(230, 145, 56);
      }

      #registration {
        margin-top: 32px;
        color: #393939;
        text-align: left;
      }

      #signupSuccess {
        margin-top: 32px;
        color: #393939;
        text-align: center;
      }
      .radio-inline label{ color:#939393; font-weight:300; }
      
      .btn-orange { background-color:  rgb(230, 105, 56); 
        border-color: #9a9a9a; 
        color:#fff; 
        display: inline-block;
        padding: 20px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
      }
      
      .btn-custom { 
        border-color: #9a9a9a; 
        color:#9a9a9a; 
        display: inline-block;
        padding: 20px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>

    <div>
      
      <nav class="navbar navbar-default">
        <div class="container">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Digital Seat</a>
          </div>
      
         
            
          </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
      </nav>

      <div class="container" style="margin-top:8px;">
        <div class="row">
          <div class="col-xs-12 centered" style="border-bottom: solid 1px #c0c0c0;">
            <img src="imgs/dslogo.jpg" alt="Digital Seat" style="width:75%; max-width:480px; padding-bottom:32px; margin-bottom: 16px;"/>
          </div>
        </div>
      </div> 
    
      <div class="container" style="margin-top:32px;" id="home">
        
        <div class="row">  
          <div class="col-md-8 col-md-offset-3">
            <h3>Beta Sign Up</h3>
            <p>Welcome to the Digital Seat Ad Share progeam for ride share drivers. We are currently accepting all applications for the program, but will initially launch the beta with 250 drivers in select cities.</p>
            <p></p>
          </div>  
        </div>

      </div>

      <div id="registration" class="container displayOn">
           
        <div id="step1" class="row">

          <div class="col-md-8 col-md-offset-3">
            
            <p>Please fill out the following information</p>

            <input type=text placeholder="Name" id="txtname" /><br />
            <input type=text placeholder="Email" id="txtemail" /><br />
            
            <br />

            <p>Are you a rideshare driver in DFW</p>
            <div class="buttons">
              <button type="button" class="btn btn-custom" name="dfwDriver">Yes</button>
              <button type="button" class="btn btn-custom" name="dfwDriver">No</button>
            </div>
            
            <br />
            <p>What rideshare do you currently drive for?</p>
            <div class="buttons">
              <button type="button" class="btn btn-custom" name="rideShare">Uber</button>
              <button type="button" class="btn btn-custom" name="rideShare">Lyft</button>
              <button type="button" class="btn btn-custom" name="rideShare">Both</button>
            </div>           

            <br />
            <p>Which city do you drive in most?</p>
            <div class="buttons">
              <button type="button" class="btn btn-custom" name="cityOfOperation">Arlington</button>
              <button type="button" class="btn btn-custom" name="cityOfOperation">Dallas</button>
              <button type="button" class="btn btn-custom" name="cityOfOperation">Fort Worth</button>
            </div>
            
            <br />
            <p>Average rides per week:</p>
            <div class="buttons">
              <button type="button" class="btn btn-custom" name="ridesPerWeek">10-20</button>
              <button type="button" class="btn btn-custom" name="ridesPerWeek">20-30</button>
              <button type="button" class="btn btn-custom" name="ridesPerWeek">30-40</button>
              <button type="button" class="btn btn-custom" name="ridesPerWeek">40-50</button>
              <button type="button" class="btn btn-custom" name="ridesPerWeek">50+</button>
            </div>

            <p><br/></p>

            <div class="row">
                <div class="col-xs-12 centered">
                  <button class="btn btn-sm btn-primary btn-orange" onclick="submitForm();">NEXT</button>
                </div>
            </div>
            
          </div>

        </div>
      
      </div>
      

    

      <div id="signupSuccess" class="container displayOff">
        <div class="tow">
          <div class="col-xs-10 col-xs-offset-1">
            <h3 style="text-align: center;">THANKS FOR SIGNING UP</h3>
            <p>Thanks for signing up with the Digital Seat advertising program. We will get back to you soon.</p>
            <p>Return to <a href="https://www.digitalseat.com">https://www.digitalseat.com</a></p>
          </div>
        </div>
       </div>
    </div>

  </body>
  <script type="text/javascript">
    $(document).ready(function(e) { init(); });
    let panels = ['registration', 'signupSucess'];
    let driver_data = undefined, 
        service_data = undefined, 
        frequented_data = undefined,
        hoursperweek_data = undefined,
        name = undefined,
        email = undefined,
        isUber = false,
        isLyft = false,
        isBoth = false;

    init = () => {
      $("button").on("click", function (event) {
        let section = event.target.name;
        let value = event.currentTarget.innerHTML;

        if(section === "dfwDriver") {
          driver_data = true;
        }
        if(section === "rideShare") {
          switch(value){
            case "Uber": 
              isUber = true;
              isLyft = false;
              break;
            case "Lyft": 
              isUber = false;
              isLyft = true;
              break;
            case "Both":
              isUber = true;
              isLyft = true;
              break;
          }
        }
        if(section === "cityOfOperation") {
          frequented_data = value;
        }
        if(section === "ridesPerWeek") {
          hoursperweek_data = value;
        }
      })
    };

    submitForm = () => {
      let valid = true;
      let data = {};
      name = $("#txtname").val();
      email = $("#txtemail").val();
     
     
      if(
          driver_data === undefined || 
          frequented_data === undefined || 
          hoursperweek_data === undefined ||
          name === undefined ||
          email === undefined){
          valid = false;
      }

      console.log(driver_data + ' ' + frequented_data + ' ' + hoursperweek_data);
      let validmail = checkField('#txtemail', 'email');

      
      console.log(valid + ' ' +  validmail);

      if(valid && validmail){
        data.name = name;
        data.email = email;
        data.inDfw = driver_data;
        data.isUber = isUber;
        data.isLyft = isLyft;
        data.cityMostDriven = frequented_data;
        data.ridesPerWeek = hoursperweek_data;
        console.log(data);
        postData(data, 'https://rideshare.digitalseat.io/signup', (success, mdata) => {
          if(success) {
            showPanel('signupSuccess');
          } else {
            alert('There was an error processing this request.');
          }
        });
        
      }
      
    }

</script>

</html>